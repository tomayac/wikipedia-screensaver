"use strict";!function(r){var l,e,n={w3:{enabled:"fullscreenEnabled",element:"fullscreenElement",request:"requestFullscreen",exit:"exitFullscreen",events:{change:"fullscreenchange",error:"fullscreenerror"}},webkit:{enabled:"webkitFullscreenEnabled",element:"webkitCurrentFullScreenElement",request:"webkitRequestFullscreen",exit:"webkitExitFullscreen",events:{change:"webkitfullscreenchange",error:"webkitfullscreenerror"}},moz:{enabled:"mozFullScreenEnabled",element:"mozFullScreenElement",request:"mozRequestFullScreen",exit:"mozCancelFullScreen",events:{change:"mozfullscreenchange",error:"mozfullscreenerror"}},ms:{enabled:"msFullscreenEnabled",element:"msFullscreenElement",request:"msRequestFullscreen",exit:"msExitFullscreen",events:{change:"MSFullscreenChange",error:"MSFullscreenError"}}},c=n.w3;for(e in n)if(n[e].enabled in r){l=n[e];break}function t(e,n){var t=r.createEvent("Event");t.initEvent(e,!0,!1),n.dispatchEvent(t)}function i(e){return function(n,t){e!==c.exit||r[l.element]?(r.addEventListener(l.events.change,function e(){n(),r.removeEventListener(l.events.change,e,!1)},!1),r.addEventListener(l.events.error,function e(){t(new TypeError),r.removeEventListener(l.events.error,e,!1)},!1)):setTimeout(function(){t(new TypeError)},1)}}c.enabled in r||!l||(r.addEventListener(l.events.change,function(e){e.stopPropagation(),e.stopImmediatePropagation(),r[c.enabled]=r[l.enabled],r[c.element]=r[l.element],t(c.events.change,e.target)},!1),r.addEventListener(l.events.error,function(e){t(c.events.error,e.target)},!1),r[c.enabled]=r[l.enabled],r[c.element]=r[l.element],r[c.exit]=function(){var e=r[l.exit]();return!e&&Promise?new Promise(i(c.exit)):e},Element.prototype[c.request]=function(){var e=this[l.request].apply(this,arguments);return!e&&Promise?new Promise(i(c.request)):e})}(document),function(e,c,i,s,a){function o(e){return 0===Object.keys(e).length&&JSON.stringify(e)===JSON.stringify({})}function u(n){var t={};return speechSynthesis.getVoices().filter(function(e){return!n||/^Google/.test(e.name)}).map(function(e){t[e.lang.substr(0,2)]=e}),t}var d=s("#tiles-container"),v=s("#sound"),m=s("#fullscreen"),f={},h=0,k=function(e,n){var t=Math.floor,r=Math.random,l=a("div");l.className="tile",l.style.backgroundColor=("rgb(\n        "+t(255*r())+",\n        "+t(255*r())+",\n        "+t(255*r())+")").replace(/\n/g,"").replace(/\s/g,"");var c=a("img");c.src="img/"+n.split("-")[0]+".svg",c.className="flag",l.appendChild(c);var i=a("a");i.className="label",i.textContent=""+e.title,i.href=e.server_url+"/wiki/"+e.title.replace(/ /g,"_"),i.target="_blank",l.appendChild(i),8<d.children.length&&d.firstChild.remove();var s=Math.floor(8*Math.random());s===h&&(s=(s+1)%9),h=s,d.insertBefore(l,d.children.item(s))},g=[function(n,t){setTimeout(function(){if(!speechSynthesis.speaking&&!speechSynthesis.pending){var e=new SpeechSynthesisUtterance;e.addEventListener("start",function(){k(n,t.lang)}),e.text=n.title,t&&(e.voice=t),v.checked?e.volume=100:e.volume=0,speechSynthesis.speak(e)}},0)}];!function(){if(e.fullscreenEnabled?m.addEventListener("change",function(){m.checked?e.body.requestFullscreen():e.exitFullscreen()}):(m.remove(),s('label[for="fullscreen"]').remove()),new EventSource("https://stream.wikimedia.org/v2/stream/recentchange").onmessage=function(e){var n=JSON.parse(e.data);"edit"!==n.type||n.bot||0!==n.namespace||"wikidatawiki"===n.wiki||function(n){var e=n.wiki.replace("wiki","");n.language=e;var t=f[e]||!1;o(f)?k(n,e):t&&g.forEach(function(e){return e(n,t)})}(n)},v.addEventListener("click",function(){var e=new SpeechSynthesisUtterance(v.checked?"Sound on":"Sound off");speechSynthesis.speak(e),f=u(!0),o(f)&&(f=u(!1)),speechSynthesis.onvoiceschanged=function(){f=u(!0),o(f)&&(f=u(!1))}}),"getWakeLock"in i){var t=s("#keep-awake");t.style.display="block",t.labels[0].style.display="block";var r=null;i.getWakeLock("screen").then(function(e){r=e;var n=null;t.addEventListener("click",function(){return function(){if(n)return n.cancel(),n=null;n=r.createRequest()}(),console.log("Wake lock is "+(r.active?"active":"not active"))})}).catch(function(e){return console.error("Could not obtain wake lock",e)})}else if("WakeLock"in c){var n=s("#keep-awake");n.style.display="block",n.labels[0].style.display="block";var l=new AbortController;n.addEventListener("click",function(){return n.checked?function(){var e=(l=new AbortController).signal;c.WakeLock.request("screen",{signal:e}).catch(function(e){"AbortError"===e.name?console.log("Wake Lock was aborted"):console.error(e.name,e.message),n.checked=!1}),console.log("Wake Lock is active"),n.checked=!0}():l.abort()})}}()}(document,window,navigator,document.querySelector.bind(document),document.createElement.bind(document));